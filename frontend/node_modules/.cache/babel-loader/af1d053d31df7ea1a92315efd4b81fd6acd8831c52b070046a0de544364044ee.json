{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getBalance}from'../services/blockchainAPI';import{validateAddress}from'../utils/crypto';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Wallet=_ref=>{let{address,balance,onWalletCreate,onTransactionSend}=_ref;const[walletInfo,setWalletInfo]=useState(null);const[isCreating,setIsCreating]=useState(false);const[isSending,setIsSending]=useState(false);const[recipient,setRecipient]=useState('');const[amount,setAmount]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');// Load wallet info when address changes\nuseEffect(()=>{if(address){loadWalletInfo(address);}},[address]);const loadWalletInfo=async walletAddress=>{try{const balanceData=await getBalance(walletAddress);setWalletInfo({address:walletAddress,balance:balanceData.balance||0,publicKey:''// In a real implementation, we would get this from the wallet\n});}catch(err){setError('Failed to load wallet information');console.error(err);}};const handleCreateWallet=()=>{setIsCreating(true);// In a real implementation, we would generate a new wallet\n// For now, we'll just call the onWalletCreate callback\nif(onWalletCreate){onWalletCreate();}setIsCreating(false);};const handleSendTransaction=()=>{// Validate inputs\nif(!recipient||!amount){setError('Please fill in all fields');return;}if(!validateAddress(recipient)){setError('Invalid recipient address');return;}const amountNum=parseFloat(amount);if(isNaN(amountNum)||amountNum<=0){setError('Invalid amount');return;}if(walletInfo&&amountNum>walletInfo.balance){setError('Insufficient balance');return;}setIsSending(true);setError('');setSuccess('');// In a real implementation, we would sign and send the transaction\n// For now, we'll just call the onTransactionSend callback\nif(onTransactionSend){onTransactionSend(recipient,amountNum);setSuccess('Transaction sent successfully!');setRecipient('');setAmount('');}setIsSending(false);};const formatBalance=balance=>{return balance.toFixed(4);};return/*#__PURE__*/_jsxs(\"div\",{className:\"wallet-container bg-gray-800 rounded-xl p-6 shadow-lg backdrop-blur-sm bg-opacity-70 border border-gray-700\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-6 text-center bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent\",children:\"Wallet\"}),!address?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 mb-6\",children:\"No wallet connected\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateWallet,disabled:isCreating,className:\"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50\",children:isCreating?'Creating...':'Create New Wallet'})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"Address:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-300 font-mono text-sm truncate max-w-[200px]\",children:address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"Balance:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent\",children:[formatBalance(balance||(walletInfo===null||walletInfo===void 0?void 0:walletInfo.balance)||0),\" COUB\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-700 pt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-white mb-4\",children:\"Send Transaction\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-900 text-red-200 p-3 rounded-lg mb-4 text-sm\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-900 text-green-200 p-3 rounded-lg mb-4 text-sm\",children:success}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 text-sm font-medium mb-2\",children:\"Recipient Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:recipient,onChange:e=>setRecipient(e.target.value),placeholder:\"Enter recipient address\",className:\"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 text-sm font-medium mb-2\",children:\"Amount (COUB)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:amount,onChange:e=>setAmount(e.target.value),placeholder:\"0.00\",step:\"0.0001\",className:\"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendTransaction,disabled:isSending,className:\"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50\",children:isSending?'Sending...':'Send Transaction'})]})]})]})]});};export default Wallet;","map":{"version":3,"names":["React","useState","useEffect","getBalance","validateAddress","jsx","_jsx","jsxs","_jsxs","Wallet","_ref","address","balance","onWalletCreate","onTransactionSend","walletInfo","setWalletInfo","isCreating","setIsCreating","isSending","setIsSending","recipient","setRecipient","amount","setAmount","error","setError","success","setSuccess","loadWalletInfo","walletAddress","balanceData","publicKey","err","console","handleCreateWallet","handleSendTransaction","amountNum","parseFloat","isNaN","formatBalance","toFixed","className","children","onClick","disabled","type","value","onChange","e","target","placeholder","step"],"sources":["/Users/admin/Documents/Forbest/Coubcore/frontend/src/components/Wallet.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { WalletInfo } from '../types/blockchain';\nimport { getBalance } from '../services/blockchainAPI';\nimport { validateAddress } from '../utils/crypto';\n\ninterface WalletProps {\n  address?: string;\n  balance?: number;\n  onWalletCreate?: () => void;\n  onTransactionSend?: (to: string, amount: number) => void;\n}\n\nconst Wallet: React.FC<WalletProps> = ({ address, balance, onWalletCreate, onTransactionSend }) => {\n  const [walletInfo, setWalletInfo] = useState<WalletInfo | null>(null);\n  const [isCreating, setIsCreating] = useState(false);\n  const [isSending, setIsSending] = useState(false);\n  const [recipient, setRecipient] = useState('');\n  const [amount, setAmount] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Load wallet info when address changes\n  useEffect(() => {\n    if (address) {\n      loadWalletInfo(address);\n    }\n  }, [address]);\n\n  const loadWalletInfo = async (walletAddress: string) => {\n    try {\n      const balanceData = await getBalance(walletAddress);\n      setWalletInfo({\n        address: walletAddress,\n        balance: balanceData.balance || 0,\n        publicKey: '', // In a real implementation, we would get this from the wallet\n      });\n    } catch (err) {\n      setError('Failed to load wallet information');\n      console.error(err);\n    }\n  };\n\n  const handleCreateWallet = () => {\n    setIsCreating(true);\n    // In a real implementation, we would generate a new wallet\n    // For now, we'll just call the onWalletCreate callback\n    if (onWalletCreate) {\n      onWalletCreate();\n    }\n    setIsCreating(false);\n  };\n\n  const handleSendTransaction = () => {\n    // Validate inputs\n    if (!recipient || !amount) {\n      setError('Please fill in all fields');\n      return;\n    }\n\n    if (!validateAddress(recipient)) {\n      setError('Invalid recipient address');\n      return;\n    }\n\n    const amountNum = parseFloat(amount);\n    if (isNaN(amountNum) || amountNum <= 0) {\n      setError('Invalid amount');\n      return;\n    }\n\n    if (walletInfo && amountNum > walletInfo.balance) {\n      setError('Insufficient balance');\n      return;\n    }\n\n    setIsSending(true);\n    setError('');\n    setSuccess('');\n\n    // In a real implementation, we would sign and send the transaction\n    // For now, we'll just call the onTransactionSend callback\n    if (onTransactionSend) {\n      onTransactionSend(recipient, amountNum);\n      setSuccess('Transaction sent successfully!');\n      setRecipient('');\n      setAmount('');\n    }\n\n    setIsSending(false);\n  };\n\n  const formatBalance = (balance: number) => {\n    return balance.toFixed(4);\n  };\n\n  return (\n    <div className=\"wallet-container bg-gray-800 rounded-xl p-6 shadow-lg backdrop-blur-sm bg-opacity-70 border border-gray-700\">\n      <h2 className=\"text-2xl font-bold text-white mb-6 text-center bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent\">\n        Wallet\n      </h2>\n\n      {!address ? (\n        <div className=\"text-center\">\n          <p className=\"text-gray-300 mb-6\">No wallet connected</p>\n          <button\n            onClick={handleCreateWallet}\n            disabled={isCreating}\n            className=\"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50\"\n          >\n            {isCreating ? 'Creating...' : 'Create New Wallet'}\n          </button>\n        </div>\n      ) : (\n        <div>\n          {/* Wallet Info */}\n          <div className=\"mb-6\">\n            <div className=\"flex justify-between items-center mb-2\">\n              <span className=\"text-gray-400\">Address:</span>\n              <span className=\"text-blue-300 font-mono text-sm truncate max-w-[200px]\">\n                {address}\n              </span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-400\">Balance:</span>\n              <span className=\"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent\">\n                {formatBalance(balance || walletInfo?.balance || 0)} COUB\n              </span>\n            </div>\n          </div>\n\n          {/* Send Transaction Form */}\n          <div className=\"border-t border-gray-700 pt-6\">\n            <h3 className=\"text-xl font-semibold text-white mb-4\">Send Transaction</h3>\n            {error && (\n              <div className=\"bg-red-900 text-red-200 p-3 rounded-lg mb-4 text-sm\">\n                {error}\n              </div>\n            )}\n            {success && (\n              <div className=\"bg-green-900 text-green-200 p-3 rounded-lg mb-4 text-sm\">\n                {success}\n              </div>\n            )}\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-gray-300 text-sm font-medium mb-2\">\n                  Recipient Address\n                </label>\n                <input\n                  type=\"text\"\n                  value={recipient}\n                  onChange={(e) => setRecipient(e.target.value)}\n                  placeholder=\"Enter recipient address\"\n                  className=\"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-gray-300 text-sm font-medium mb-2\">\n                  Amount (COUB)\n                </label>\n                <input\n                  type=\"number\"\n                  value={amount}\n                  onChange={(e) => setAmount(e.target.value)}\n                  placeholder=\"0.00\"\n                  step=\"0.0001\"\n                  className=\"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n              <button\n                onClick={handleSendTransaction}\n                disabled={isSending}\n                className=\"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50\"\n              >\n                {isSending ? 'Sending...' : 'Send Transaction'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Wallet;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}